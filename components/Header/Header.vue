<template>
    <div>
        <fixed-header :threshold="100">
            <div class="header navbar">
                <div class="container header__wrap">
                    <nuxt-link v-if="!isTablet" to="/">
                        <img
                            class="header__logo"
                            :src="require('~/assets/swimshot_header_logo.jpg')"
                            alt="Swim shot логотип"
                        />
                    </nuxt-link>

                    <client-only v-else>
                        <Slide :closeOnNavigation="true" noOverlay>
                            <nuxt-link
                                v-for="item in headerMenu"
                                :key="item.text"
                                class="header__links-link js-link"
                                :to="{ path: '/', hash: `${item.hash}` }"
                            >
                                <p>{{ item.text }}</p>
                            </nuxt-link>

                            <div class="header__links-social">
                                <a
                                    v-for="link in socialLinks"
                                    :key="link.id"
                                    :href="link.href"
                                    class="social-item social-item--modal"
                                    target="_blank"
                                >
                                    <Vk v-if="link.id === 'vk'" class="social-item-img" />
                                    <Whatsapp v-if="link.id === 'whatsapp'" class="social-item-img" />
                                    <Telegram v-if="link.id === 'telegram'" class="social-item-img" />
                                    <Instagram v-if="link.id === 'instagram'" class="social-item-img" />
                                </a>
                            </div>
                        </Slide>
                    </client-only>

                    <div class="header__links" v-if="!isTablet">
                        <nuxt-link
                            v-for="item in headerMenu"
                            :key="item.text"
                            class="header__links-link js-link"
                            :to="{ path: `${item.path || '/'}`, hash: `${item.hash}` }"
                        >
                            <p>{{ item.text }}</p>
                        </nuxt-link>
                    </div>

                    <nuxt-link class="header__logo-wrap" v-if="isTablet" to="/">
                        <img
                            class="header__logo"
                            :src="require('~/assets/swimshot_header_logo.jpg')"
                            alt="Swim shot логотип"
                        />
                    </nuxt-link>

                    <div class="header__links header__links--media">
                        <div class="header__links-social">
                            <a
                                v-for="link in socialLinks"
                                :key="link.id"
                                :href="link.href"
                                class="social-item"
                                target="_blank"
                            >
                                <Vk v-if="link.id === 'vk'" class="social-item-img" />
                                <Whatsapp v-if="link.id === 'whatsapp'" class="social-item-img" />
                                <Telegram v-if="link.id === 'telegram'" class="social-item-img" />
                                <Instagram v-if="link.id === 'instagram'" class="social-item-img" />
                            </a>
                        </div>

                        <div v-if="!isTablet" class="header__links-phone-wrap">
                            <a class="header__links-phone" href="tel:+74994305595">+7 (499) 430-55-95</a>

                            <a class="header__links-phone-text" href="javascript:;" @click="onModalOpen"
                                >Заказать обратный звонок</a
                            >
                        </div>
                    </div>
                </div>
            </div>
        </fixed-header>

        <div class="sticky"></div>
    </div>
</template>

<script>
import './styles.css';
import { headerMenu, socialLinksHeader } from '~/static/js/links.js';

import FixedHeader from 'vue-fixed-header';

import Vk from '~/assets/svg/vk.svg';
import Instagram from '~/assets/svg/instagram.svg';
import Zen from '~/assets/svg/zen.svg';
import Telegram from '~/assets/svg/telegram.svg';
import NewBadge from '~/assets/svg/new-badge.svg';
import Whatsapp from '~/assets/svg/whatsapp.svg';
// import Login from '~/assets/svg/login.svg';

export default {
    name: 'a-header',
    components: { FixedHeader, Vk, Instagram, Telegram, Zen, NewBadge, Whatsapp },

    data() {
        return {
            headerMenu,
            socialLinks: socialLinksHeader,

            isBurgerOpen: false,
            modalOpen: false,
        };
    },

    computed: {
        isTablet() {
            return this.$mq === 'tablet';
        },
    },

    methods: {
        onModalOpen() {
            this.$emit('modalOpen');
        },
    },
};
</script>

<style>
.navbar.vue-fixed-header--isFixed {
    position: fixed;
    left: 0;
    top: 0;
    width: 100vw;

    & + .sticky {
        padding-top: 73px;

        @media (--tablet) {
            padding-top: 50px;
        }
    }
}
</style>
